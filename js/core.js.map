{"version":3,"sources":["patterns/dropdown/_dropdown.js"],"names":["initLaunchers","dropdowns","document","querySelectorAll","i","launcher","querySelector","menu","addEventListener","launchDropdown","setAttribute","e","target","container","parentElement","blur","closeDropdowns","removeAttribute","window","setTimeout","stopPropagation","openMenus","openLaunchers","focus","hideMenu","thisMenu"],"mappings":"CAAA,WACE,YAEA,SAASA,KAIP,IAAA,GADMC,GAAYC,SAASC,iBAAiB,aACxCC,EAAIA,EAARA,EAAeA,EAAIH,OAAnBG,IAAA,CACE,GAAIC,GAAWJ,EAAUG,GAAGE,cAAc,sBACtCC,EAAON,EAAUG,GAAGE,cAAc,iBAEtCD,GAASG,iBAAiB,QAASC,GACnCF,EAAKG,aAAa,SAAU,WAIhC,QAASD,GAAeE,GACtB,GAAIN,GAAWM,EAAEC,OACbC,EAAYR,EAASS,cACrBP,EAAOM,EAAUP,cAAc,iBAEnCD,GAASU,OACTC,IACAT,EAAKU,gBAAgB,UACrBC,OAAOC,WAAY,WAAAd,EAAMK,aAAA,gBAAA,SAAA,IAAEL,SAAAA,iBAAsB,QAAAW,GAA0BL,EAA3ES,kBACAlB,EAAAA,iBACAS,EAAES,QAGH,QAAAJ,KAMC,IAAIK,GAHJC,GAAApB,SAAAC,iBAAA,4CACAkB,EAAAnB,SAAAC,iBAAA,6DAEIkB,EAAAA,EAAAA,EAAYnB,EAASC,OAATC,IAGdkB,EAAclB,GAAGU,cAAcS,QADjCD,EAAelB,GAAAA,aAAIkB,gBAA2B,SAC5CA,EAAAA,EAAiBR,GAEjBU,UAAAA,oBAAA,QAAAR,GAGH,QAAAQ,GAAAC,GAICN,WAAA,WAAAM,EAAAf,aAAA,SAAA,WAAA,KAEmBe,SAAAA,iBAAsB,mBAAtBzB","file":"core.js","sourcesContent":["(() => {\n  'use strict';\n\n  function initLaunchers() {\n    // This function is called first, to initialize\n    // the click listeners on the menu launchers.\n    const dropdowns = document.querySelectorAll('.dropdown');\n    for(let i = 0; i < dropdowns.length; i++) {\n      let launcher = dropdowns[i].querySelector('.dropdown-launcher');\n      let menu = dropdowns[i].querySelector('.dropdown-menu');\n\n      launcher.addEventListener('click', launchDropdown);\n      menu.setAttribute('hidden', 'hidden');\n    }\n  }\n\n  function launchDropdown(e) {\n    let launcher = e.target;\n    let container = launcher.parentElement;\n    let menu = container.querySelector('.dropdown-menu');\n\n    launcher.blur();\n    closeDropdowns();\n    menu.removeAttribute('hidden');\n    window.setTimeout( () => { launcher.setAttribute('aria-expanded', 'true');}, 50);\n    document.addEventListener('click', closeDropdowns);\n    e.stopPropagation();\n    e.preventDefault();\n    menu.focus();\n  }\n\n  function closeDropdowns() {\n    // Select these elements at runtime instead of at startup,\n    // so we can select new menus as they are added to the DOM.\n    let openLaunchers = document.querySelectorAll('.dropdown-launcher[aria-expanded=\"true\"]');\n    let openMenus = document.querySelectorAll('.dropdown-launcher[aria-expanded=\"true\"] + .dropdown-menu');\n\n    for(let i = 0; i < openLaunchers.length; i++) {\n      openLaunchers[i].parentElement.focus();\n      openLaunchers[i].setAttribute('aria-expanded', 'false');\n      hideMenu(openMenus[i]);\n    }\n    document.removeEventListener('click', closeDropdowns);\n  }\n\n  function hideMenu(thisMenu) {\n    // This is defined as a specific function, so it can be called\n    // multiple times, and multiple instances could run independently\n    // of the timeout.\n    setTimeout( () => {thisMenu.setAttribute('hidden', 'hidden')}, 300 );\n  }\n\n  document.addEventListener('DOMContentLoaded', initLaunchers());\n})();\n"]}